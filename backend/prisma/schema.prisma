generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             String  @id @default(uuid())
  username       String  @unique
  email          String  @unique
  profilePicture String? @default("@/assets/morpheus.png")
  hash           String
  hashedRt       String?
  isOnline       Boolean @default(false)

  winrate Float? @default(0)
  Wins    Int    @default(0)
  Losses  Int    @default(0)
  Played  Int    @default(0)

  friendsId String? @map("friends_id")
  friends   User?   @relation("FriendsRelation", fields: [friendsId], references: [id])
  friendOf  User[]  @relation("FriendsRelation")

  blockedById String? @map("blocked_by_id")
  blockedBy   User?   @relation("BlockedByRelation", fields: [blockedById], references: [id])
  blocked     User[]  @relation("BlockedByRelation")

  blockingId  String? @map("blocking_id")
  blocking    User?   @relation("BlockingRelation", fields: [blockingId], references: [id])
  blockedByMe User[]  @relation("BlockingRelation")

  @@map("users")
}
